#####
# THIS FILE TRANSLATES THE ACTRANSFER PRODUCTIONS
# FROM 'CheinMorrison_hier.lisp' INTO INTERMEDIATE PROP INSTRUCTIONS.
#####

# add-instr verbal-CWM
# ;~ init
pp {propose*cheinH*verbal-CWM*init
	const1 cheinH-verbal-CWM-init
	--
	s.G.Gtop -
-->
	s.const1 +
	s.const1 =
}
pp {apply*cheinH*verbal-CWM*init
	const1 cheinH-verbal-CWM-init
	--
	s.operator.name == const1
-->
	s.G.Gtop = s.WM
}
# add-instr verbal-CWM
pp {propose*cheinH*verbal-CWM*init
	const1 VCWM-lexdec
	const2 word
	const3 is-word
	const4 error
	--
	s.V.slot1 == const2
	s.RT.slot1 != const3
	s.smem.rt-result != const4
-->
	s.const1 +
	s.const1 =
}
# add-instr verbal-CWM
# ;~ success
pp {propose*cheinH*verbal-CWM*success
	const1 cheinH-verbal-CWM-success
	const2 yes
	const3 is-word
	--
	s.RT.slot3 == const2
	s.RT.slot1 == const3
-->
	s.const1 +
	s.const1 =
}
pp {apply*cheinH*verbal-CWM*success
	const1 cheinH-verbal-CWM-success
	const2 nil
	const3 type
	const4 Y
	--
	s.operator.name == const1
-->
	s.G.Gcontrol = const2
	s.AC.action.slot1 = const3
	s.AC.action.slot2 = const4
	s.flags.clear-rt = const1
}
# add-instr verbal-CWM
# ;~ fail
pp {propose*cheinH*verbal-CWM*fail
	const1 cheinH-verbal-CWM-fail
	const2 error
	--
	s.smem.rt-result == const2
-->
	s.const1 +
	s.const1 =
}
pp {apply*cheinH*verbal-CWM*fail
	const1 cheinH-verbal-CWM-fail
	const2 nil
	const3 type
	const4 N
	--
	s.operator.name == const1
-->
	s.G.Gcontrol = const2
	s.AC.action.slot1 = const3
	s.AC.action.slot2 = const4
	s.flags.clear-rt = const1
}
# add-instr verbal-CWM
# ;~ store-wm
pp {propose*cheinH*verbal-CWM*store-wm
	const1 cheinH-verbal-CWM-store-wm
	const2 letter
	--
	s.V.slot1 == const2
	s.WM.slot1 -
-->
	s.const1 +
	s.const1 =
}
pp {apply*cheinH*verbal-CWM*store-wm
	const1 cheinH-verbal-CWM-store-wm
	const2 wait
	--
	s.operator.name == const1
-->
	s.WM.slot1 = s.V.slot2
	s.AC.action.slot1 = const2
}
# add-instr verbal-CWM
# ;~ store-dm
pp {propose*cheinH*verbal-CWM*store-dm
	const1 cheinH-verbal-CWM-store-dm
	const2 letter
	--
	s.V.slot1 == const2
	s.WM.slot1 
-->
	s.const1 +
	s.const1 =
}
pp {apply*cheinH*verbal-CWM*store-dm
	const1 cheinH-verbal-CWM-store-dm
	const2 wait
	--
	s.operator.name == const1
-->
	s.NW.wm.slot1 = s.V.slot2
	s.NW.wm.WMprev = s.WM
	s.AC.action.slot1 = const2
}
# add-instr verbal-CWM
# ;~ prepare
pp {propose*cheinH*verbal-CWM*prepare
	const1 prepare
	const2 pending
	--
	s.V.slot1 == const2
	s.WM.slot1 
-->
	s.const1 +
	s.const1 =
}
# add-instr verbal-CWM
# ;~ report
pp {propose*cheinH*verbal-CWM*report
	const1 VCWM-report
	const2 report
	--
	s.V.slot1 == const2
-->
	s.const1 +
	s.const1 =
}
# add-instr VCWM-rehearse
# ;~ start
pp {propose*cheinH*VCWM-rehearse*start
	const1 cheinH-VCWM-rehearse-start
	--
	s.smem.rt-result -
-->
	s.const1 +
	s.const1 =
}
pp {apply*cheinH*VCWM-rehearse*start
	const1 cheinH-VCWM-rehearse-start
	const2 retrieve
	--
	s.operator.name == const1
-->
	s.Q.retrieve.q-type = const2
	s.Q.retrieve = s.G.Gtop
}
# add-instr VCWM-rehearse
# ;~ next
pp {propose*cheinH*VCWM-rehearse*next
	const1 cheinH-VCWM-rehearse-next
	const2 error
	--
	s.smem.rt-result <> const2
-->
	s.const1 +
	s.const1 =
}
pp {apply*cheinH*VCWM-rehearse*next
	const1 cheinH-VCWM-rehearse-next
	const2 wm-query
	--
	s.operator.name == const1
-->
	s.Q.wm-query.root = s.RT.RTid
	s.Q.wm-query.q-type = const2
}
# add-instr VCWM-rehearse
# ;~ restart
pp {propose*cheinH*VCWM-rehearse*restart
	const1 cheinH-VCWM-rehearse-restart
	const2 error
	--
	s.smem.rt-result == const2
-->
	s.const1 +
	s.const1 =
}
pp {apply*cheinH*VCWM-rehearse*restart
	const1 cheinH-VCWM-rehearse-restart
	const2 retrieve
	--
	s.operator.name == const1
-->
	s.Q.retrieve.q-type = const2
	s.Q.retrieve = s.G.Gtop
}
# add-instr VCWM-lexdec
# ;~ retrieve
pp {propose*cheinH*VCWM-lexdec*retrieve
	const1 cheinH-VCWM-lexdec-retrieve
	const2 word
	--
	s.V.slot1 == const2
-->
	s.const1 +
	s.const1 =
}
pp {apply*cheinH*VCWM-lexdec*retrieve
	const1 cheinH-VCWM-lexdec-retrieve
	const2 is-word
	const3 query
	--
	s.operator.name == const1
-->
	s.Q.query.q-type = const3
	s.Q.query.slot1 = const2
	s.Q.query.slot2 = s.V.slot2
}
# add-instr prepare
# ;~ VCWM
pp {propose*cheinH*prepare*VCWM
	const1 VCWM-rehearse
	const2 verbal-CWM
	--
	s.V.task == const2
-->
	s.const1 +
	s.const1 =
}
# add-instr prepare
# ;~ stroop
pp {propose*cheinH*prepare*stroop
	const1 stroop-answer
	const2 stroop
	--
	s.V.task == const2
-->
	s.const1 +
	s.const1 =
}
# add-instr idle
# ;~ wait
pp {propose*cheinH*idle*wait
	const1 cheinH-idle-wait
	const2 pending
	--
	s.V.slot1 == const2
-->
	s.const1 +
	s.const1 =
}
pp {apply*cheinH*idle*wait
	const1 cheinH-idle-wait
	const2 wait
	--
	s.operator.name == const1
-->
	s.AC.action.slot1 = const2
}
# add-instr idle
# ;~ retrieve-text
pp {propose*cheinH*idle*retrieve-text
	const1 cheinH-idle-retrieve-text
	const2 stroop
	--
	s.V.task == const2
	s.V.slot3 == s.V.slot2
-->
	s.const1 +
	s.const1 =
}
pp {apply*cheinH*idle*retrieve-text
	const1 cheinH-idle-retrieve-text
	const2 s-mapping
	const3 query
	--
	s.operator.name == const1
-->
	s.Q.query.q-type = const3
	s.Q.query.slot1 = const2
	s.Q.query.slot2 = s.V.slot3
}
# add-instr idle
# ;~ focus-stroop-answer
pp {propose*cheinH*idle*focus-stroop-answer
	const1 stroop-answer
	const2 stroop
	--
	s.V.task == const2
	s.V.slot3 <> s.V.slot2
-->
	s.const1 +
	s.const1 =
}
# add-instr VCWM-report
# ;~ start
pp {propose*cheinH*VCWM-report*start
	const1 cheinH-VCWM-report-start
	const2 report
	--
	s.WM.slot3 != const2
-->
	s.const1 +
	s.const1 =
}
pp {apply*cheinH*VCWM-report*start
	const1 cheinH-VCWM-report-start
	const2 retrieve
	const3 report
	--
	s.operator.name == const1
-->
	s.Q.retrieve.q-type = const2
	s.Q.retrieve = s.G.Gtop
	s.WM.slot3 = const3
}
# add-instr VCWM-report
# ;~ report
pp {propose*cheinH*VCWM-report*report
	const1 cheinH-VCWM-report-report
	const2 error
	const3 report
	--
	s.smem.rt-result <> const2
	s.WM.slot3 == const3
-->
	s.const1 +
	s.const1 =
}
pp {apply*cheinH*VCWM-report*report
	const1 cheinH-VCWM-report-report
	const2 type
	const3 wm-query
	--
	s.operator.name == const1
-->
	s.AC.action.slot1 = const2
	s.AC.action.slot2 = s.RT.slot1
	s.Q.wm-query.root = s.RT.RTid
	s.Q.wm-query.q-type = const3
}
# add-instr VCWM-report
# ;~ finish
pp {propose*cheinH*VCWM-report*finish
	const1 cheinH-VCWM-report-finish
	const2 error
	const3 report
	--
	s.smem.rt-result == const2
	s.WM.slot3 == const3
-->
	s.const1 +
	s.const1 =
}
pp {apply*cheinH*VCWM-report*finish
	const1 cheinH-VCWM-report-finish
	const2 enter
	const3 finish
	--
	s.operator.name == const1
-->
	s.AC.action.slot1 = const2
	s.G.Gtask = const3
	s.flags.clear-rt = const1
}
# add-instr stroop
# ;~ prepare
pp {propose*cheinH*stroop*prepare
	const1 prepare
	const2 last
	--
	s.V.slot1 != const2
	s.RT.slot3 != s.V.slot2
-->
	s.const1 +
	s.const1 =
}
# add-instr stroop
# ;~ idle
pp {propose*cheinH*stroop*idle
	const1 idle
	const2 last
	--
	s.V.slot1 != const2
	s.RT.slot3 != s.V.slot2
-->
	s.const1 +
	s.const1 =
}
# add-instr stroop
# ;~ say-correct
pp {propose*cheinH*stroop*say-correct
	const1 cheinH-stroop-say-correct
	--
	s.RT.slot3 == s.V.slot2
-->
	s.const1 +
	s.const1 =
}
pp {apply*cheinH*stroop*say-correct
	const1 cheinH-stroop-say-correct
	const2 say
	--
	s.operator.name == const1
-->
	s.AC.action.slot1 = const2
	s.AC.action.slot2 = s.RT.slot3
	s.flags.clear-rt = const1
}
# add-instr stroop
# ;~ finish
pp {propose*cheinH*stroop*finish
	const1 cheinH-stroop-finish
	const2 last
	--
	s.V.slot1 == const2
-->
	s.const1 +
	s.const1 =
}
pp {apply*cheinH*stroop*finish
	const1 cheinH-stroop-finish
	const2 finish
	--
	s.operator.name == const1
-->
	s.G.Gtask = const2
	s.flags.clear-rt = const1
}
# add-instr stroop-answer
# ;~ wait
pp {propose*cheinH*stroop-answer*wait
	const1 idle
	const2 yes
	--
	s.V.slot1 <> const2
-->
	s.const1 +
	s.const1 =
}
# add-instr stroop-answer
# ;~ retrieve-color
pp {propose*cheinH*stroop-answer*retrieve-color
	const1 cheinH-stroop-answer-retrieve-color
	--
	s.V.slot2 
-->
	s.const1 +
	s.const1 =
}
pp {apply*cheinH*stroop-answer*retrieve-color
	const1 cheinH-stroop-answer-retrieve-color
	const2 s-mapping
	const3 query
	--
	s.operator.name == const1
-->
	s.Q.query.q-type = const3
	s.Q.query.slot1 = const2
	s.Q.query.slot2 = s.V.slot2
}
